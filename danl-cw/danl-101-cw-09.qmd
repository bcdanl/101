---
title: Classwork 9
subtitle: ETL Process in R
date: 2025-10-29
execute: 
  echo: false
  eval: true
  warning: false
  message: false
---
```{r}
#| include: false

library(knitr)
library(rmarkdown)
library(tidyverse)
library(skimr)
library(ggthemes)
library(hrbrthemes)
library(DT)

theme_set(theme_ipsum() +
          theme(strip.background =element_rect(fill="lightgray"),
                axis.title.x = element_text(size = rel(1.5)),
                axis.title.y = element_text(size = rel(1.5)),
                legend.title = element_text(size=rel(1.25))
                ))
```

<br>


# Question 1

Consider the following three related data frames from the [Classwork 8 - Social Media Analytics](https://bcdanl.github.io/danl-cw/danl-101-cw-08.html):

- `df_survey` â€” individual student responses about social media usage  
- `df_platform` â€” reference information about each social media platform  
- `df_card` â€” additional details or attributes linked to each platform  

You will use these data frames in Question 1.

:::: {.columns}

::: {.column width="47.5%"}

```{r}
#| echo: true
df_platform <- 
  read_csv("https://bcdanl.github.io/data/platform_reference.csv")
```


```{r}
rmarkdown::paged_table(df_platform)
```

:::

::: {.column width="5%"}
:::

::: {.column width="47.5%"}

```{r}
#| echo: true
df_card <- 
  read_csv("https://bcdanl.github.io/data/card_suit_rules.csv")
```

```{r}
rmarkdown::paged_table(df_card)
```

:::


::::

```{r}
#| echo: true
df_survey <- 
  read_csv("https://bcdanl.github.io/data/danl-101-survey-social-media-fall-2025.csv")
```

```{r}
rmarkdown::paged_table(df_survey)
```

## Part A

Write an R code to create a data frame named `df_joined` that combines the three datasets â€” `df_survey`, `df_platform`, and `df_card` â€” using the `left_join()` function.


```{r}
df_joined <- df_survey |>
  left_join(df_platform) |>
  left_join(df_card)

rmarkdown::paged_table(df_joined)
```


## Part B
Find out which platforms DANL 101 students use.

::: {.callout-tip collapse="false"}

### `count()`: Counting Occurrences of Each Category in a Categorical Variable


```{.r}
DATA.FRAME |> count(CATERIGOCAL_VARIABLE)
```

:::{.nonincremental}

- The data transformation function `count()` calculates **the frequency of each unique value** in a categorical variable.

:::	


```{.r}
library(nycflights13)
flights |> count(origin)
```


:::: {.columns}

::: {.column width="50%"}

```{r}
#| results: asis

DT::datatable(nycflights13::flights |> count(origin),
              options = list(dom = 't'))
```
:::
::: {.column width="50%"}

- `flights |> count(origin)` returns the **data.frame** with the two variables, `origin` and `n`:
  - `n`: the number of occurrences of each unique value in the `origin` variable in the `flights` data.frame

:::
::::

:::


## Part C
Count how many students use each platform, and determine **which platform is the most popular** based on the number of users.

- Check out the new data transformation function: `count()`:



## Part D
Calculate descriptive statistics (e.g., mean, standard deviation, and quartiles) of `daily_time_min` for each platform by using the `skimr::skim()` function.  


<br>

# Question 2
Consider the two related data.frames, `df_1` and `df_2`:

:::: {.columns}

::: {.column width="47.5%"}
- `df_1`
```{r}
#| echo: false
#| eval: true
df_1 <- data.frame(
  id = c(1:2, 4),
  name = c("Alice", "Bob", "Olivia"),
  age = c(19, 21, 20)
)

knitr::kable( df_1)

```
:::

::: {.column width="5%"}

:::

::: {.column width="47.5%"}
- `df_2`
```{r}
#| echo: false
#| eval: true

df_2 <- data.frame(
  id = 1:3,
  major = c("Economics", "Business Administration", "Data Analytics")
)

knitr::kable( df_2)

```
:::

::::

Which of the following R code correctly join the two related data.frames, `df_1` and `df_2`, to produce the resulting data.frame shown below?

```{r}
#| echo: false
#| eval: true
#| message: false
#| warning: false

df_1 <- data.frame(
  id = c(1:2, 4),
  name = c("Alice", "Bob", "Olivia"),
  age = c(19, 21, 20)
)


df_2 <- data.frame(
  id = 1:3,
  major = c("Economics", "Business Administration", "Data Analytics")
)


df_3 <- df_2 |> left_join(df_1)

knitr::kable( df_3)

```

a. `df_1 |> left_join(df_2)`
b. `df_2 |> left_join(df_1)`
c. Both a and b


<br><br>

# Discussion 

<font size = "5">Welcome to our Classwork 9 Discussion Board! ðŸ‘‹ </font>

This space is designed for you to engage with your classmates about the material covered in Classwork 9.

Whether you are looking to delve deeper into the content, share insights, or have questions about the content, this is the perfect place for you.

If you have any specific questions for Byeong-Hak (**@bcdanl**) or peer classmate (@GitHub-Username) regarding the Classwork 9 materials or need clarification on any points, don't hesitate to ask here. 

Let's collaborate and learn from each other!
