<!DOCTYPE html>
<html>
  <head>
    <link
      rel="stylesheet"
      href="bulma.css"
    />
  </head>
  
  <form id="form" class="container m-2 pl-2" action="submit.php" method="POST">
    <br>
  <div style="display:block; margin:-50px;"></div>
    <section>
      <div>
        <h1 style="color: #1c4982; font-size: 30px; font-style: bold">Name, Email, and Session</h1>
      </div>
    </section>
    <div style="display:block; margin:-50px;"></div>
    <br><br><div class="field">
      <label class="label">What is your DANL 101 session schedule?</label>
      <div class="control">
        <label class="radio">
          <input type="radio" name="session" value="MWF 9:30am-10:20am" /> MWF 9:30am-10:20am
        </label>
        <label class="radio">
          <input type="radio" name="session" value="MW 2:00pm-3:15pm" /> MW 2:00pm-3:15pm
        </label>
      </div>
    </div>
    <br><br>

    <div class="field">
      <label class="label">What is your first name?</label>
      <div class="control">
        <textarea
          class="textarea"
          placeholder="Enter your answer"
          name="first-name"
        ></textarea>
      </div>
    </div>

    <br><br><div class="field">
      <label class="label">What is your last name?</label>
      <div class="control">
        <textarea
          class="textarea"
          placeholder="Enter your answer"
          name="last-name"
        ></textarea>
      </div>
    </div>

    <br><br><div class="field">
      <label class="label">Please enter your Geneseo email address without @geneseo.edu. For example, if your full Geneseo email address is abcd234@geneseo.edu, you should enter only abcd234. If you do not have a Geneseo email, please provide your full email address (e.g., abcd@gmail.com).</label>
      <div class="control">
        <textarea
          class="textarea"
          placeholder="Enter your answer"
          name="email"
        ></textarea>
      </div>
    </div>
    
    <br><br><div class="field">
      <label class="label">How many times have you submitted this assignment so far?</label>
      <div class="control">
        <textarea
          class="textarea"
          placeholder="Enter your answer"
          name="nth"
        ></textarea>
      </div>
    </div>

    <br><br>
        <section>
      <div>
        <h1 style="color: #1c4982; font-size: 30px; font-style: bold">Multiple Choice Questions</h1>
      </div>
    </section>
    
    <div style="display:block; margin:-50px;"></div>
    <!-- True/False Questions -->
    <br><br><div class="field">
      <label class="label">1. Which best defines “assistance vs. authorship” when using generative AI?</label>
      <div class="control">
        <label class="radio">
          <input type="radio" name="mc1" value="a" /> AI represents assistance when it is any AI use; AI represents authorship when code runs
        </label>
        <label class="radio">
          <input type="radio" name="mc1" value="b" /> AI represents assistance when it helps ideate/edit; AI represents authorship when it produces core content you submit as your own
        </label>
        <label class="radio">
          <input type="radio" name="mc1" value="c" /> AI represents assistance when it is citations only; AI represents authorship when it is paraphrasing
        </label>
        <label class="radio">
          <input type="radio" name="mc1" value="d" /> AI represents assistance when it is grammar; AI represents authorship when it is images
        </label>
      </div>
    </div>

    <br><br><div class="field">
      <label class="label">2. For our course homework, a student submits AI-generated code that they cannot explain or understand. The most accurate stance is:</label>
      <div class="control">
        <label class="radio">
          <input type="radio" name="mc2" value="a" /> Allowed; tool use is free
        </label>
        <label class="radio">
          <input type="radio" name="mc2" value="b" /> Assistance
        </label>
        <label class="radio">
          <input type="radio" name="mc2" value="c" /> Authorship and likely academic-integrity risk
        </label>
        <label class="radio">
          <input type="radio" name="mc2" value="d" /> Only a gray area
        </label>
      </div>
    </div>

    <br><br><div class="field">
      <label class="label">3. Attention in transformers primarily helps the model:</label>
      <div class="control">
        <label class="radio">
          <input type="radio" name="mc3" value="a" /> Reduce compute cost by skipping tokens
        </label>
        <label class="radio">
          <input type="radio" name="mc3" value="b" /> Choose the most relevant parts of the sequence
        </label>
        <label class="radio">
          <input type="radio" name="mc3" value="c" /> Memorize training data verbatim
        </label>
        <label class="radio">
          <input type="radio" name="mc3" value="d" /> Predict emotions
        </label>
      </div>
    </div>

    <br><br><div class="field">
      <label class="label">4. Supervised learning requires:</label>
      <div class="control">
        <label class="radio">
          <input type="radio" name="mc4" value="a" /> Only raw text
        </label>
        <label class="radio">
          <input type="radio" name="mc4" value="b" /> Labeled examples
        </label>
        <label class="radio">
          <input type="radio" name="mc4" value="c" /> Human ranking of model outputs only
        </label>
        <label class="radio">
          <input type="radio" name="mc4" value="d" /> Images but no labels
        </label>
      </div>
    </div>

    <br><br><div class="field">
      <label class="label">5. RLHF is best described as:</label>
      <div class="control">
        <label class="radio">
          <input type="radio" name="mc5" value="a" /> Penalizing long outputs
        </label>
        <label class="radio">
          <input type="radio" name="mc5" value="b" /> Human-ranked preferences guiding a reward model
        </label>
        <label class="radio">
          <input type="radio" name="mc5" value="c" /> Unsupervised pretraining
        </label>
        <label class="radio">
          <input type="radio" name="mc5" value="d" /> Prompt engineering
        </label>
      </div>
    </div>

    <br><br><div class="field">
      <label class="label">6. “Be the Human in the Loop” implies students should:</label>
      <div class="control">
        <label class="radio">
          <input type="radio" name="mc6" value="a" /> Trust polished outputs
        </label>
        <label class="radio">
          <input type="radio" name="mc6" value="b" /> Turn off tests to avoid overfitting
        </label>
        <label class="radio">
          <input type="radio" name="mc6" value="c" /> Verify facts, run tests, and check assumptions
        </label>
        <label class="radio">
          <input type="radio" name="mc6" value="d" /> Always pick the first model answer
        </label>
      </div>
    </div>

    <br><br><div class="field">
      <label class="label">7. [BCG Study in Classwork 3 - Rule 4] Students in the bottom-right quadrant (AI strong, human novice) should prioritize:</label>
      <div class="control">
        <label class="radio">
          <input type="radio" name="mc7" value="a" /> Speed over understanding
        </label>
        <label class="radio">
          <input type="radio" name="mc7" value="b" /> Hiding AI use
        </label>
        <label class="radio">
          <input type="radio" name="mc7" value="c" /> Climbing the human-skill axis through verification and practice
        </label>
        <label class="radio">
          <input type="radio" name="mc7" value="d" /> Zero prompting
        </label>
      </div>
    </div>

    <br><br><div class="field">
      <label class="label">8. Transformer encoders primarily:</label>
      <div class="control">
        <label class="radio">
          <input type="radio" name="mc8" value="a" /> Generate outputs token by token
        </label>
        <label class="radio">
          <input type="radio" name="mc8" value="b" /> Create context-aware representations of the inputs
        </label>
        <label class="radio">
          <input type="radio" name="mc8" value="c" /> Rank human preferences
        </label>
        <label class="radio">
          <input type="radio" name="mc8" value="d" /> Perform diffusion sampling
        </label>
      </div>
    </div>

    <br><br><div class="field">
      <label class="label">9. Treating AI “like a person” improves outputs primarily because:</label>
      <div class="control">
        <label class="radio">
          <input type="radio" name="mc9" value="a" /> It creates sentience
        </label>
        <label class="radio">
          <input type="radio" name="mc9" value="b" /> It conditions constraints/roles that steer generation
        </label>
        <label class="radio">
          <input type="radio" name="mc9" value="c" /> It bypasses guardrails
        </label>
        <label class="radio">
          <input type="radio" name="mc9" value="d" /> It increases context length
        </label>
      </div>
    </div>

    <br><br><div class="field">
      <label class="label">10. Publishing AI-written work without disclosure most directly violates:</label>
      <div class="control">
        <label class="radio">
          <input type="radio" name="mc10" value="a" /> Token limits
        </label>
        <label class="radio">
          <input type="radio" name="mc10" value="b" /> Academic integrity/attribution norms
        </label>
        <label class="radio">
          <input type="radio" name="mc10" value="c" /> HTML standards
        </label>
        <label class="radio">
          <input type="radio" name="mc10" value="d" /> RLHF constraints
        </label>
      </div>
    </div>
    
    <br><br><div class="field">
      <label class="label">11. Which pairing is most accurate?</label>
      <div class="control">
        <label class="radio">
          <input type="radio" name="mc11" value="a" /> Supervised = topic modeling; Unsupervised = sentiment
        </label>
        <label class="radio">
          <input type="radio" name="mc11" value="b" /> Supervised = spam filtering; Unsupervised = clustering
        </label>
        <label class="radio">
          <input type="radio" name="mc11" value="c" /> Supervised = clustering; Unsupervised = regression
        </label>
        <label class="radio">
          <input type="radio" name="mc11" value="d" /> Supervised = sentiment; Unsupervised = regression
        </label>
      </div>
    </div>
    
    <br><br><div class="field">
      <label class="label">12. The strongest reason to keep prompt logs for the use of generative AI:</label>
      <div class="control">
        <label class="radio">
          <input type="radio" name="mc12" value="a" /> Increase token count
        </label>
        <label class="radio">
          <input type="radio" name="mc12" value="b" /> Reproducibility and iterative improvement
        </label>
        <label class="radio">
          <input type="radio" name="mc12" value="c" /> Reduce latency
        </label>
        <label class="radio">
          <input type="radio" name="mc12" value="d" /> Satisfy HTML validators
        </label>
      </div>
    </div>
  
    <br><br>
        <section>
      <div>
        <h1 style="color: #1c4982; font-size: 30px; font-style: bold">Short-Answer Questions</h1>
      </div>
    </section>
    
    <br><br><div class="field">
      <label class="label">1. Describe one benefit and one risk of vibe coding</label>
      <div class="control">
        <textarea
          class="textarea"
          placeholder="Enter your answer"
          name="sa1"
        ></textarea>
      </div>
    </div>

    <br><br><div class="field">
      <label class="label">2. Generative AI is being described as a General Purpose Technology (GPT) like electricity or the internet. Do you agree with this analogy? Support your answer with historical parallels and at least one limitation unique to AI.
</label>
      <div class="control">
        <textarea
          class="textarea"
          placeholder="Enter your answer"
          name="sa2"
        ></textarea>
      </div>
    </div>

    <br><br><div class="field">
      <label class="label">3. [Classwork 3 - Rule 4] The BCG study found that AI can push beginners close to expert performance on certain tasks. What does this mean for education? Should instructors grade differently when students can “perform like experts” with AI support?
</label>
      <div class="control">
        <textarea
          class="textarea"
          placeholder="Enter your answer"
          name="sa3"
        ></textarea>
      </div>
    </div>

    <br><br><div class="field">
      <label class="label">4. Explain the paperclip maximizer thought experiment. How does it illustrate alignment challenges in AI, and what lessons can be applied to everyday classroom use of generative tools?
</label>
      <div class="control">
        <textarea
          class="textarea"
          placeholder="Enter your answer"
          name="sa4"
        ></textarea>
      </div>
    </div>

    
    <br><br>
    <section>
      <div>
        <h1 style="color: #1c4982; font-size: 30px; font-style: bold">Data Transformation with R</h1>
      </div>
    </section>
    <div style="display:block; margin:-50px;"></div>
    
    <!-- R Questions -->
    <br><br><p><strong>For the questions in the R section, consider the data.frame <code>nyc_payroll_new</code>. For detailed descriptions of the variables in this data.frame, please refer to the following link: <a href="https://data.cityofnewyork.us/City-Government/Citywide-Payroll-Data-Fiscal-Year-/k397-673e/about_data" target="_blank">Citywide Payroll Data (Fiscal Year)</a>.</strong></p>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>nyc_payroll_new <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://bcdanl.github.io/data/nyc_payroll_2024.csv"</span>)</span></code></pre></div>
</div>

    <br><br>
    <div class="field">
      <div class="control">
        <label class="label">
          <p>
            1. How can you filter the data.frame <code>nyc_payroll_new</code> to calculate descriptive statistics (mean and standard deviation) of <code>Base_Salary</code> for workers in the <code>Work_Location_Borough</code> <strong>"MANHATTAN"</strong>? Similarly, how can you filter the data.frame <code>nyc_payroll_new</code> to calculate these statistics for workers in the <code>Work_Location_Borough</code> <strong>"QUEENS"</strong>?
          </p>
          <p>
            Provide the R code to perform these calculations, and then report the mean and standard deviation of <code>Base_Salary</code> separately for workers in "MANHATTAN" and "QUEENS".
          </p>
        </label>
    
        <div style="display: flex; gap: 1rem;">
    
          <!-- Manhattan Column -->
          <div style="flex: 1;">
            <h3>Manhattan</h3>
            <textarea
              class="textarea"
              placeholder="Provide your R code for 'MANHATTAN' here"
              name="code-1-manhattan"
            ></textarea>
            <textarea
              class="textarea"
              placeholder="Provide the mean of Base_Salary for 'MANHATTAN' here"
              name="output-1-mean-manhattan"
            ></textarea>
            <textarea
              class="textarea"
              placeholder="Provide the standard deviation of Base_Salary for 'MANHATTAN' here"
              name="output-1-sd-manhattan"
            ></textarea>
          </div>
    
          <!-- Queens Column -->
          <div style="flex: 1;">
            <h3>Queens</h3>
            <textarea
              class="textarea"
              placeholder="Provide your R code for 'QUEENS' here"
              name="code-1-queens"
            ></textarea>
            <textarea
              class="textarea"
              placeholder="Provide the mean of Base_Salary for 'QUEENS' here"
              name="output-1-mean-queens"
            ></textarea>
            <textarea
              class="textarea"
              placeholder="Provide the standard deviation of Base_Salary for 'QUEENS' here"
              name="output-1-sd-queens"
            ></textarea>
          </div>
    
        </div>
      </div>
    </div>

    <br><br><div class="field">
      <div class="control">
      <label class="label"><p>2. How can you filter the data.frame <code>nyc_payroll_new</code> to show only the records where the <code>Base_Salary</code> is greater than or equal to $100,000?</p>
<p>Complete the code by filling in the blank:</p></label>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>nyc_payroll_new <span class="sc">|&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(__BLANK__)</span></code></pre></div>
</div>
        <textarea
          class="textarea"
          placeholder="Provide your answer for BLANK"
          name="code-2"
        ></textarea>
      </div>
    </div>

    <br><br><div class="field">
      <div class="control">
      <label class="label"><p>3. How can you select only distinct combinations of <code>Agency_Name</code> and <code>Title_Description</code>?</p>
<p>Complete the code by filling in the blank:</p></label>

<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>nyc_payroll_new <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  __BLANK__</span></code></pre></div>
</div>
        <textarea
          class="textarea"
          placeholder="Provide your answer for BLANK"
          name="code-3"
        ></textarea>
      </div>
    </div>

    <br><br><div class="field">
      <div class="control">
      <label class="label"><p>4. How would you arrange the data by <code>Regular_Gross_Paid</code> in descending order, showing the highest paid employees first?</p>
<p>Complete the code by filling in the blank:</p></label>

<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>nyc_payroll_new <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  __BLANK__</span></code></pre></div>
</div>
        <textarea
          class="textarea"
          placeholder="Provide your answer for BLANK"
          name="code-4"
        ></textarea>
      </div>
    </div>

    <br><br><div class="field">
      <div class="control">
      <label class="label"><p>5. How can you select and rename the <code>Title_Description</code> variable to <code>Title</code>?</p>
<p>Complete the code by filling in the blank:</p></label>

<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>nyc_payroll_new <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(__BLANK__)</span></code></pre></div>
</div>
        <textarea
          class="textarea"
          placeholder="Provide your answer for BLANK"
          name="code-5"
        ></textarea>
      </div>
    </div>

    <br><br><div class="field">
      <div class="control">
      <label class="label"><p>6. How can you filter the data to show only records for the <strong>“POLICE DEPARTMENT”</strong> <code>Agency_Name</code> and arrange it by <code>Total_OT_Paid</code> in ascending order?</p>
<p>Complete the code by filling in the blanks:</p></label>

<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>nyc_payroll_new <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(__BLANK 1__) <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(__BLANK 2__)</span></code></pre></div>
</div>
        <textarea
          class="textarea"
          placeholder="Provide your answer for BLANK 1"
          name="code-6-1"
        ></textarea>
        <textarea
          class="textarea"
          placeholder="Provide your answer for BLANK 2"
          name="code-6-2"
        ></textarea>
      </div>
    </div>

    <br><br><div class="field">
      <div class="control">
      <label class="label"><p>7. How can you filter the data to include only those records where the <code>Pay_Basis</code> is <strong>“per Annum”</strong> and then select only the <code>First_Name</code>, <code>Last_Name</code>, and <code>Base_Salary</code> variables?</p>
<p>Complete the code by filling in the blanks:</p></label>

<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>nyc_payroll_new <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(__BLANK 1__) <span class="sc">|&gt;</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(__BLANK 2__, __BLANK 3__, __BLANK 4__)</span></code></pre></div>
</div>
        <textarea
          class="textarea"
          placeholder="Provide your answer for BLANK 1"
          name="code-7-1"
        ></textarea>
        <textarea
          class="textarea"
          placeholder="Provide your answer for BLANK 2"
          name="code-7-2"
        ></textarea>
        <textarea
          class="textarea"
          placeholder="Provide your answer for BLANK 3"
          name="code-7-3"
        ></textarea>
        <textarea
          class="textarea"
          placeholder="Provide your answer for BLANK 4"
          name="code-7-4"
        ></textarea>
      </div>
    </div>

    <br><br><div class="field">
      <div class="control">
      <label class="label"><p>8. How would you arrange the data.frame by <code>Work_Location_Borough</code> in ascending order and <code>Base_Salary</code> in descending order?</p>
<p>Complete the code by filling in the blank:</p></label>

<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>nyc_payroll_new <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  __BLANK__</span></code></pre></div>
</div>
        <textarea
          class="textarea"
          placeholder="Provide your answer for BLANK"
          name="code-8"
        ></textarea>
      </div>
    </div>


    <br><br><div class="field">
      <div class="control">
      <label class="label"><p>9. How can you filter the <code>nyc_payroll_new</code> data.frame to remove observations where the <code>Base_Salary</code> variable has <code>NA</code> values? After filtering, how would you calculate the total number of remaining observations?</p>
<p>Provide the R code needed to perform these data extraction tasks.</p></label>

        <textarea
          class="textarea"
          placeholder="Provide your answer here"
          name="code-9"
        ></textarea>
      </div>
    </div>   

    <br><br>
    
      <div class="field">
        <div class="control">
          <button type="button" class="button is-link is-light" id="print-btn">
            Print to PDF (answers included)
          </button>
        </div>
      </div>

      <div class="field is-grouped">
        <div class="control">
          <button class="button is-primary" type="submit" id="submit-button">
            Submit
          </button>
        </div>
        <div class="control">
          <button class="button is-danger">Cancel</button>
        </div>
      </div>
      
    </form>
    
    <!-- Printable snapshot container (created if missing) -->
    <div id="print-view" aria-hidden="true" style="display:none;"></div>

    <div
      id="message"
      style="
        display: none;
        margin: 18px;
        font-weight: bold;
        color: green;
        padding: 8px;
        background-color: beige;
        border-radius: 4px;
        border-color: aquamarine;
      "
    ></div>
    
<script>
(function () {
  // Tiny helpers
  const esc = s => String(s ?? '')
    .replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));

  function ensurePrintView() {
    let pv = document.getElementById('print-view');
    if (!pv) {
      pv = document.createElement('div');
      pv.id = 'print-view';
      pv.setAttribute('aria-hidden','true');
      pv.style.display = 'none';
      document.body.appendChild(pv);
    }
    return pv;
  }

  function buildPrintHTML() {
    const form = document.getElementById('form');
    if (!form) return '<p>Form not found.</p>';

    const when = new Date().toLocaleString();
    let html = `
      <section style="margin-bottom:1rem">
        <h1 style="color:#1c4982; font-size:28px; margin:0 0 .25rem 0">DANL 101 – Submission Snapshot</h1>
        <div style="font-size:14px"><strong>Generated:</strong> ${esc(when)}</div>
      </section>
    `;

    // Walk *in order* through direct children only
    Array.from(form.children).forEach(node => {
      const tag = node.tagName ? node.tagName.toLowerCase() : '';

      // Section header in place
      if (tag === 'section') {
        const h1 = node.querySelector('h1');
        if (h1) {
          html += `<h2 style="color:#1c4982; margin:1.25rem 0 .5rem">${h1.innerHTML}</h2>`;
        }
      }

      // Each question block
      if (node.classList && node.classList.contains('field')) {
        const labelEl = node.querySelector('label.label');
        if (!labelEl) return;

        // Determine answer text
        // --- inside your node.classList.contains('field') block ---

        // Collect ALL answers (radio + textarea)
        let answers = [];
        
        // Radio (single choice)
        const checked = node.querySelector("input[type='radio']:checked");
        if (checked) {
          answers.push({ label: "Selected option", value: checked.value });
        }
        
        // One or more textareas
        const textareas = node.querySelectorAll("textarea");
        textareas.forEach((ta, idx) => {
          const val = ta.value.trim();
          answers.push({
            label: textareas.length > 1 ? `Blank ${idx+1}` : "Answer",
            value: val
          });
        });
        
        // Code snippet if present
        const codeBlock = node.querySelector('.sourceCode');
        const codeHTML = codeBlock
          ? `<div class="code-block" style="margin:.5rem 0">${codeBlock.outerHTML}</div>`
          : '';
        
        // Choices if this field has radios
        let choicesHTML = '';
        const radioLabels = node.querySelectorAll('label.radio');
        if (radioLabels.length) {
          choicesHTML = '<ul class="choices" style="margin:.35rem 0 .5rem; padding-left:1.1rem">';
          radioLabels.forEach(lbl => {
            const input = lbl.querySelector("input[type='radio']");
            const optionText = lbl.textContent.trim();
            const selected = input && input.checked;
            choicesHTML += `<li style="margin:.15rem 0; list-style:disc;">
              ${selected ? '<strong>✓ ' + esc(optionText) + '</strong>' : esc(optionText)}
            </li>`;
          });
          choicesHTML += '</ul>';
        }
        
        // Render answers (may be multiple)
        let answersHTML = '';
        if (answers.length) {
          answersHTML = '<div class="a" style="white-space:normal">';
          answers.forEach(ans => {
            answersHTML += `<div><em>${ans.label}:</em> ${ans.value ? esc(ans.value).replace(/\n/g,'<br>') : '<em>— no answer —</em>'}</div>`;
          });
          answersHTML += '</div>';
        } else {
          answersHTML = '<div class="a"><em>— no answer —</em></div>';
        }
        
        html += `
          <div class="qa" style="margin:0 0 1rem; padding:.75rem; border:1px solid #ddd; border-radius:8px">
            <div class="q" style="font-weight:600; margin-bottom:.35rem">${labelEl.innerHTML}</div>
            ${codeHTML}
            ${choicesHTML}
            ${answersHTML}
          </div>
        `;
      }
    });

    return html;
  }

  function openPrintSnapshot() {
    try {
      const pv = ensurePrintView();
      pv.innerHTML = buildPrintHTML();
      document.body.classList.add('printing');
      window.print();
      // Remove the class after print paints
      setTimeout(() => document.body.classList.remove('printing'), 0);
    } catch (e) {
      console.error('[Print] Error:', e);
      alert('Could not open print dialog. See console for details.');
    }
  }

  // Bind after DOM is ready; also guard against other script errors
  function bindPrint() {
    const btn = document.getElementById('print-btn');
    if (!btn) return;
    // Remove any previous handlers that might have been attached
    btn.replaceWith(btn.cloneNode(true));
    const fresh = document.getElementById('print-btn');
    fresh.addEventListener('click', openPrintSnapshot, {capture:false});
  }

  // Robust readiness (covers cases where other scripts throw)
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => { try { bindPrint(); } catch(e){ console.error(e);} });
  } else {
    try { bindPrint(); } catch(e){ console.error(e); }
  }

  // Expose for debugging if needed
  window.__forcePrintBind = bindPrint;
  window.__printNow = openPrintSnapshot;
})();
</script>
<script>
    const form = document.getElementById('form');
    const messageElement = document.getElementById('message');
    const submitButton = document.getElementById('submit-button');

    form.addEventListener("submit", function (e) {
        e.preventDefault(); // Prevent the default form submission
        messageElement.textContent = "Submitting..";
        messageElement.style.display = "block";
        submitButton.disabled = true;

        // Collect the form data
        var formData = new FormData(this);
        var keyValuePairs = [];
        for (var pair of formData.entries()) {
            keyValuePairs.push(pair[0] + "=" + encodeURIComponent(pair[1]));
        }

        var formDataString = keyValuePairs.join("&");

        // Send a POST request to your Google Apps Script
        fetch(
            "https://script.google.com/macros/s/AKfycbyLsfKy35-KDB1h8HvEcRqV8At9OXtjKdOzaBHJ9jftFMxDwjnBs7E00itG1RtmuscN/exec",
            {
                redirect: "follow",
                method: "POST",
                body: formDataString,
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8",
                },
            }
        )
        .then(function (response) {
            // Check if the request was successful
            if (response.ok) {
                return response.json(); // Assuming your script returns JSON response
            } else {
                throw new Error("Failed to submit the form.");
            }
        })
        .then(function (data) {
            // Display a success message
            messageElement.textContent = "Data submitted successfully!";
            messageElement.style.display = "block";
            messageElement.style.backgroundColor = "green";
            messageElement.style.color = "beige";
            submitButton.disabled = false;
            form.reset();

            setTimeout(function () {
                messageElement.textContent = "";
                messageElement.style.display = "none";
            }, 2600);
        })
        .catch(function (error) {
            // Handle errors, display an error message
            console.error(error);
            messageElement.textContent = "An error occurred while submitting the form.";
            messageElement.style.display = "block";
            messageElement.style.backgroundColor = "red";
            messageElement.style.color = "white";
            submitButton.disabled = false;
        });
    });
</script>


<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
<script>
document.getElementById("form").addEventListener("submit", function (e) {
  e.preventDefault();
  document.getElementById("submit-button").disabled = true;
  document.getElementById("status-message").style.display = "none";

  var formData = new FormData(this);
  var keyValuePairs = [];
  for (var pair of formData.entries()) {
    keyValuePairs.push(pair[0] + "=" + encodeURIComponent(pair[1]));
  }
  var formDataString = keyValuePairs.join("&");

  fetch(this.action, {
    redirect: "follow",
    method: "POST",
    body: formDataString,
    headers: {
      "Content-Type": "text/plain;charset=utf-8",
    },
  })
  .then(response => response.text())
  .then(data => {
    document.getElementById("status-message").textContent = "Form submitted successfully. Check your email for confirmation.";
    document.getElementById("status-message").style.display = "block";
    document.getElementById("status-message").style.backgroundColor = "green";
    document.getElementById("status-message").style.color = "white";
    document.getElementById("submit-button").disabled = false;
    document.getElementById("form").reset();
  })
  .catch(error => {
    console.error('Error:', error);
    document.getElementById("status-message").textContent = "An error occurred. Please try again.";
    document.getElementById("status-message").style.display = "block";
    document.getElementById("status-message").style.backgroundColor = "red";
    document.getElementById("status-message").style.color = "white";
    document.getElementById("submit-button").disabled = false;
  });
});
</script>
<link rel="stylesheet" href="../styles.css">
<link rel="stylesheet" href="../assets/css/font.css">
<style>
  .textarea {
    width: 300px;
    height: 100px;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Select all div elements with data-pagedtable="false"
    const containers = document.querySelectorAll('div[data-pagedtable="false"]');

    containers.forEach(container => {
      const script = container.querySelector('script[data-pagedtable-source]');
      if (!script) return; // Skip if no script found
      
      // Parse JSON data
      const tableData = JSON.parse(script.textContent);
      const columns = tableData.columns;
      const rows = tableData.data;
      const rowsPerPage = 10;
      let currentPage = 1;

      // Create the table element
      const table = document.createElement('table');
      table.className = 'paged-table';

      // Create the table header
      const thead = document.createElement('thead');
      const headerRow = document.createElement('tr');
      columns.forEach(col => {
        const th = document.createElement('th');
        th.textContent = col.label[0];
        th.style.textAlign = col.align[0];
        headerRow.appendChild(th);
      });
      thead.appendChild(headerRow);
      table.appendChild(thead);

      // Create the table body
      const tbody = document.createElement('tbody');
      table.appendChild(tbody);
      container.appendChild(table);

      // Create pagination controls
      const paginationControls = document.createElement('div');
      paginationControls.className = 'pagination-controls';
      container.appendChild(paginationControls);

      // Function to render rows for the current page
      function renderRows() {
        tbody.innerHTML = ''; // Clear existing rows
        const startIndex = (currentPage - 1) * rowsPerPage;
        const endIndex = Math.min(startIndex + rowsPerPage, rows.length);

        for (let i = startIndex; i < endIndex; i++) {
          const tr = document.createElement('tr');
          columns.forEach(col => {
            const td = document.createElement('td');
            const colName = col.name[0];
            td.textContent = rows[i][colName];
            td.style.textAlign = col.align[0];
            tr.appendChild(td);
          });
          tbody.appendChild(tr);
        }
      }

      // Function to create pagination buttons
      function createPaginationButtons() {
        paginationControls.innerHTML = ''; // Clear existing buttons
        const totalPages = Math.ceil(rows.length / rowsPerPage);

        function createButton(page) {
          const button = document.createElement('button');
          button.textContent = page;
          button.className = 'pagination-button';
          if (page === currentPage) {
            button.disabled = true;
          }
          button.addEventListener('click', () => {
            currentPage = page;
            renderRows();
            createPaginationButtons();
          });
          paginationControls.appendChild(button);
        }

        // Show first 5 pages or all if total is less than 5
        for (let i = 1; i <= Math.min(5, totalPages); i++) {
          createButton(i);
        }

        // Add ellipsis if there are more than 6 pages
        if (totalPages > 6 && currentPage <= totalPages - 5) {
          const ellipsis = document.createElement('span');
          ellipsis.textContent = '...';
          ellipsis.className = 'pagination-ellipsis';
          paginationControls.appendChild(ellipsis);
        }

        // Add last page button
        if (totalPages > 5) {
          createButton(totalPages);
        }
      }

      // Initial render
      renderRows();
      createPaginationButtons();
    });
  });
</script>

<style>
  /* Basic table styling */
  .paged-table {
    width: 100%;
    border-collapse: collapse; /* Remove double borders */
    margin-top: 10px;
  }

  /* Add borders to cells */
  .paged-table th,
  .paged-table td {
    border: 1px solid #ddd;
    padding: 8px;
  }

  /* Header styling */
  .paged-table th {
    background-color: #f4f4f4;
    font-weight: bold;
    text-align: left;
  }

  /* Alternate row colors */
  .paged-table tr:nth-child(odd) {
    background-color: #f9f9f9; /* Light grey for odd rows */
  }

  .paged-table tr:nth-child(even) {
    background-color: #ffffff; /* White for even rows */
  }

  /* Add space between columns */
  .paged-table td,
  .paged-table th {
    padding-left: 12px;
    padding-right: 12px;
  }

  /* Highlight row on hover */
  .paged-table tr:hover {
    background-color: #6fa8dc; /* Light blue */
  }

  /* Stack radio options vertically: one option per line */
  .field .control label.radio {
    display: block;          /* force each option to its own line */
    margin: 0.25rem 0;       /* tidy spacing */
    line-height: 1.4;
    white-space: normal;     /* allow wrapping if text is long */
  }
  /* Remove Bulma's inline spacing between radios */
  .field .control label.radio + label.radio {
    margin-left: 0;
  }
  /* Optional: a little space between the dot and text */
  .field .control label.radio input[type="radio"] {
    margin-right: 0.5rem;
    transform: translateY(1px);
  }

  /* If you truly want each option to NEVER wrap to a second line, use this class on the .control: */
  .no-wrap-options label.radio { white-space: nowrap; }


  @media print {
    #form, #message,
    #quarto-sidebar, #quarto-sidebar-glass,
    nav, header, footer,
    .button, .btn { display: none !important; }

    #print-view { display: block !important; }

    pre, code {
      font-family: monospace;
      font-size: 12px;
      white-space: pre-wrap;
      word-break: break-word;
    }
    .code-block {
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 6px;
      margin-bottom: .5rem;
      background: #f9f9f9;
    }
  }

  /* During print prep on screen */
  #print-view { display: none; }
  body.printing #form { display: none !important; }
  body.printing #print-view { display: block !important; }
  
</style>


</html>